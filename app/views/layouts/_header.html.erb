<div class="main-navbar">
  <nav class="navbar navbar-default">
      <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".js-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <!-- <a class="navbar-brand" href="#">Symphony</a> -->
      <%= link_to 'Symphony', root_path, class: 'navbar-brand' %>
    </div>
    <div class="collapse navbar-collapse js-navbar-collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown mega-dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Browse The Store<span class="glyphicon glyphicon-chevron-down"></span></a>
          <ul class="dropdown-menu mega-dropdown-menu row">
            <li class="col-sm-3">
              <ul>
                <li class="dropdown-header">New in Symphony</li>
                              <div id="myCarousel" class="carousel slide" data-ride="carousel">
                                <div class="carousel-inner">
                                  <% @ad_instruments.each_with_index do |item, i| %>
                                    <%= render partial: 'layouts/ad_navbar_item',
                                               locals: { item: item, i: i } %>
                                  <% end %>
                                </div><!-- End Carousel Inner -->
                              </div><!-- /.carousel -->
                              <li class="divider"></li>
                              <li><a href="#">View all Instruments <span class="glyphicon glyphicon-chevron-right pull-right"></span></a></li>
              </ul>
            </li>
            <li class="col-sm-3">
              <ul>
                <li class="dropdown-header">Violins</li>
                <% @instruments[:violins][0...4].each do |v| %>
                  <li><a href="#"><%= v.company %></a></li>
                <% end %>
                <li class="divider"></li>
                <li class="dropdown-header">Pianos</li>
                <% @instruments[:pianos][0...4].each do |p| %>
                  <li><a href="#"><%= p.company %></a></li>
                <% end %>
              </ul>
            </li>
            <li class="col-sm-3">
              <ul>
                <li class="dropdown-header">Guitars</li>
                <% @instruments[:guitars][0...4].each do |p| %>
                  <li><a href="#"><%= p.company %></a></li>
                <% end %>
                <li class="divider"></li>
                <li class="dropdown-header">Saxophones</li>
                <% @instruments[:saxophones][0...4].each do |p| %>
                  <li><a href="#"><%= p.company %></a></li>
                <% end %>
              </ul>
            </li>
            <li class="col-sm-3">
              <ul>
                <li class="dropdown-header">Support</li>
                <li><a href="#">About</a></li>
                <li><a href="#">Delivery Info</a></li>
                <li><a href="#">FAQ &amp; Help</a></li>
                <li><a href="#">Contacts</a></li>
                <li class="divider"></li>
                              <li class="dropdown-header">Newsletter</li>
                              <form class="form" role="form">
                                <div class="form-group">
                                  <label class="sr-only" for="email">Email address</label>
                                  <input type="email" class="form-control" id="email" placeholder="Enter email">
                                </div>
                                <button type="submit" class="btn btn-primary btn-block">Subscribe</button>
                              </form>
              </ul>
            </li>
          </ul>
        </li>
      </ul>


    <!-- ======================= -->
    <%- if user_signed_in? %>

        <ul class="nav navbar-nav navbar-right">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><%= gravatar_tag current_user.email, size: 30 %>      <%= current_user.full_name %> (₴560000)<span class="glyphicon glyphicon-chevron-down"></span></a>
            <ul class="dropdown-menu">
              <!-- <li><a href="#">Profile</a></li> -->
              <li><%= link_to 'Profile', user_path(current_user.id) %></li>
              <li><a href="#">Shopping Cart (₴560000)</a></li>
              <li><%= link_to 'Settings', edit_user_registration_path %></li>
              <li role="separator" class="divider"></li>
              <li><%= link_to 'Logout', destroy_user_session_path, method: :delete %></li>
            </ul>
          </li>
        <!-- SEARCH BUTTON -->
        <li id="search-list-element">
          <a href="#search">Search<span class="glyphicon glyphicon-search"></span></a>
        </li>
      </ul>

    <% else %>
    <!-- LOGIN START -->
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"><b>Login</b> <span class="glyphicon glyphicon-chevron-down"></span></a>
      <ul id="login-dp" class="dropdown-menu">
        <li>
           <div class="row">
              <div class="col-md-12">
                Login via
                <div class="social-buttons">
                  <a href="#" class="btn btn-fb"><i class="fa fa-facebook"></i> Facebook</a>
                  <a href="#" class="btn btn-tw"><i class="fa fa-twitter"></i> Twitter</a>
                </div>
                                or

    <%= simple_form_for(resource, as: resource_name,
                                    url: session_path(resource_name),
                                    wrapper_mappings: { boolean: :vertical_boolean },
                                    html: { class: "form login-tab", id: "login-nav",
                                            role: "form" }) do |f| %>
        <div class="form-group">
          <%= f.input :email, placeholder: "Email address", required: true, autofocus: true, label: false, input_html: { class: 'form-control' } %>
        </div>

        <div class="form-group">
          <%= f.input :password, placeholder: "Password", required: true, label: false, input_html: { class: 'form-control' } %>
        </div>
        <div class="checkbox">
           <label>
            <%= f.input :remember_me, as: :boolean if devise_mapping.rememberable? %>
           </label>
        </div>
        <div class="form-group">
           <%= f.button :submit, "Log in", class: "btn btn-primary btn-block" %>
          <div class="help-block text-right"><%= link_to "Forgot your password?", new_password_path(resource_name) %></div>
        </div>
    <% end %>
              </div>
              <div class="bottom text-center">
                New here? <a href="#"><b><%= link_to 'Join Us', new_user_registration_path %></b></a>
              </div>
           </div>
        </li>
      </ul>
        </li>
        <!-- SEARCH BUTTON -->
        <li id="search-list-element">
          <a href="#search">Search<span class="glyphicon glyphicon-search"></span></a>
        </li>

      </ul> <!-- LOGIN END -->

      <% end %>
    </div><!-- /.nav-collapse -->
  </nav>
</div>

<!-- SEARCH FIELD -->
<div id="search">
    <button type="button" class="close">×</button>
    <form>
        <input type="search" value="" placeholder="type keyword(s) here" />
        <button type="submit" class="btn btn-primary">Search</button>
    </form>
</div>